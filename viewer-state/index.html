
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-6.2.6">
    
    
      
        <title>Viewer State Management - Mol* Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.cb6bc1d0.min.css">
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#viewer-state-management" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Mol* Documentation" class="md-header-nav__button md-logo" aria-label="Mol* Documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89"><path d="M3.136 17.387v42.932l42.932 21.467L3.136 17.387z"/><path d="M21.91 8l42.933 64.398-18.775 9.388L3.136 17.387 21.91 8z" fill-opacity=".5"/><path d="M67.535 17.387L40.273 35.543l21.878 32.818 5.384 2.691V17.387z"/><path d="M67.535 17.387v53.666l18.774-9.388V8l-18.774 9.387z" fill-opacity=".25"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Mol* Documentation
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Viewer State Management
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/molstar/docs" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Mol* Documentation" class="md-nav__button md-logo" aria-label="Mol* Documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89"><path d="M3.136 17.387v42.932l42.932 21.467L3.136 17.387z"/><path d="M21.91 8l42.933 64.398-18.775 9.388L3.136 17.387 21.91 8z" fill-opacity=".5"/><path d="M67.535 17.387L40.273 35.543l21.878 32.818 5.384 2.691V17.387z"/><path d="M67.535 17.387v53.666l18.774-9.388V8l-18.774 9.387z" fill-opacity=".25"/></svg>

    </a>
    Mol* Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/molstar/docs" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../plugin/" class="md-nav__link">
        Creating Plugin Instance
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../data-state/" class="md-nav__link">
        Data State Management
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Viewer State Management
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Viewer State Management
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#canvas3d-properties" class="md-nav__link">
    Canvas3D Properties
  </a>
  
    <nav class="md-nav" aria-label="Canvas3D Properties">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#change-background-highlight-or-select-color" class="md-nav__link">
    Change background, highlight, or select color
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interactivity" class="md-nav__link">
    Interactivity
  </a>
  
    <nav class="md-nav" aria-label="Interactivity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log-message-to-mol-console" class="md-nav__link">
    Log message to Mol* console
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-toast-message" class="md-nav__link">
    Show toast message
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#behaviors" class="md-nav__link">
    Behaviors
  </a>
  
    <nav class="md-nav" aria-label="Behaviors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#highlight-loci" class="md-nav__link">
    Highlight Loci
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select-loci" class="md-nav__link">
    Select Loci
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#focus-loci" class="md-nav__link">
    Focus Loci
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zoom-loci" class="md-nav__link">
    Zoom Loci
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#turn-off-view-resetting-on-new-representations" class="md-nav__link">
    Turn off view resetting on new representations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../selections/" class="md-nav__link">
        Selections
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" >
      
      <label class="md-nav__link" for="nav-7">
        Transforms
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Transforms" data-md-level="1">
        <label class="md-nav__title" for="nav-7">
          <span class="md-nav__icon md-icon"></span>
          Transforms
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../transforms/custom-trajectory/" class="md-nav__link">
        Load Trajectory from a Custom Format
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" >
      
      <label class="md-nav__link" for="nav-8">
        Data Access Tools
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Data Access Tools" data-md-level="1">
        <label class="md-nav__title" for="nav-8">
          <span class="md-nav__icon md-icon"></span>
          Data Access Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../data-access-tools/model-server/" class="md-nav__link">
        Model Server
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../data-access-tools/volume-server/" class="md-nav__link">
        Volume Server
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../data-access-tools/plugin-state-server/" class="md-nav__link">
        Plugin State Server
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../data-access-tools/convert-to-bcif/" class="md-nav__link">
        Convert CIF to BinaryCIF
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../data-access-tools/create-ccd-table/" class="md-nav__link">
        Create Table from CCD
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../data-access-tools/extract-ccd-ions/" class="md-nav__link">
        Extract Ions from CCD
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9" >
      
      <label class="md-nav__link" for="nav-9">
        Extensions
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Extensions" data-md-level="1">
        <label class="md-nav__title" for="nav-9">
          <span class="md-nav__icon md-icon"></span>
          Extensions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../extensions/mvs/" class="md-nav__link">
        MolViewSpec
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../extensions/struct-conn/" class="md-nav__link">
        wwPDB StructConn
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#canvas3d-properties" class="md-nav__link">
    Canvas3D Properties
  </a>
  
    <nav class="md-nav" aria-label="Canvas3D Properties">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#change-background-highlight-or-select-color" class="md-nav__link">
    Change background, highlight, or select color
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interactivity" class="md-nav__link">
    Interactivity
  </a>
  
    <nav class="md-nav" aria-label="Interactivity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log-message-to-mol-console" class="md-nav__link">
    Log message to Mol* console
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-toast-message" class="md-nav__link">
    Show toast message
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#behaviors" class="md-nav__link">
    Behaviors
  </a>
  
    <nav class="md-nav" aria-label="Behaviors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#highlight-loci" class="md-nav__link">
    Highlight Loci
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select-loci" class="md-nav__link">
    Select Loci
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#focus-loci" class="md-nav__link">
    Focus Loci
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zoom-loci" class="md-nav__link">
    Zoom Loci
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#turn-off-view-resetting-on-new-representations" class="md-nav__link">
    Turn off view resetting on new representations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/molstar/docs/edit/master/docs/viewer-state.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="viewer-state-management">Viewer State Management</h1>
<h2 id="canvas3d-properties"><code>Canvas3D</code> Properties</h2>
<p>Properties of the <a href="https://github.com/molstar/molstar/blob/master/src/mol-canvas3d/canvas3d.ts"><code>Canvas3D</code></a> can be 
changed using <a href="https://github.com/molstar/molstar/blob/master/src/mol-plugin/commands.ts"><code>PluginCommands</code></a>.  </p>
<h3 id="change-background-highlight-or-select-color">Change background, highlight, or select color</h3>
<p><div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ColorNames</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;molstar/lib/mol-util/color/names&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">PluginCommands</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;molstar/lib/mol-plugin/commands&#39;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">renderer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">plugin</span><span class="p">.</span><span class="nx">canvas3d</span><span class="o">!</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">renderer</span><span class="p">;</span>
<span class="nx">PluginCommands</span><span class="p">.</span><span class="nx">Canvas3D</span><span class="p">.</span><span class="nx">SetSettings</span><span class="p">(</span><span class="nx">plugin</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">settings</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">renderer</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="nx">renderer</span><span class="p">,</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="kt">ColorNames.red</span><span class="w"> </span><span class="cm">/* or: 0xff0000 as Color */</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">});</span>
</code></pre></div>
Similarly, <code>highlightColor</code> and <code>selectColor</code> can be updated.</p>
<h2 id="interactivity">Interactivity</h2>
<p>Interactivity in Mol* is based on the concept of <code>Loci</code>. A <code>Loci</code> usually references a collection of objects and can be created by a <a href="../selections/"><code>Selection</code></a>. For example, the
<code>Loci</code> captures all atoms in the chain with label_asym_id B of a protein:
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Script</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;molstar/lib/mol-script/script&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">StructureSelection</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;molstar/lib/mol-model/structure/query&#39;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">plugin</span><span class="p">.</span><span class="nx">managers</span><span class="p">.</span><span class="nx">structure</span><span class="p">.</span><span class="nx">hierarchy</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">structures</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">?</span><span class="p">.</span><span class="nx">cell</span><span class="p">.</span><span class="nx">obj</span><span class="o">?</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">selection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Script</span><span class="p">.</span><span class="nx">getStructureSelection</span><span class="p">(</span><span class="nx">Q</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">Q</span><span class="p">.</span><span class="nx">struct</span><span class="p">.</span><span class="nx">generator</span><span class="p">.</span><span class="nx">atomGroups</span><span class="p">({</span>
<span class="w">    </span><span class="s1">&#39;chain-test&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">Q</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">rel</span><span class="p">.</span><span class="nx">eq</span><span class="p">([</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">Q</span><span class="p">.</span><span class="nx">ammp</span><span class="p">(</span><span class="s1">&#39;label_asym_id&#39;</span><span class="p">)])</span>
<span class="p">}),</span><span class="w"> </span><span class="nx">data</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">loci</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">StructureSelection</span><span class="p">.</span><span class="nx">toLociWithSourceUnits</span><span class="p">(</span><span class="nx">selection</span><span class="p">);</span>
</code></pre></div>
A <code>Loci</code> can be used to trigger custom <a href="#behaviors"><code>Behaviors</code></a>.</p>
<h3 id="log-message-to-mol-console">Log message to Mol* console</h3>
<p>The built-in console in the bottom center of the plugin shows log entries.
<div class="highlight"><pre><span></span><code><span class="nx">plugin</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">message</span><span class="p">(</span><span class="s1">&#39;This message will appear in the Mol* console&#39;</span><span class="p">);</span>
</code></pre></div>
Other log levels are: <code>info</code>, <code>warn</code>, and <code>error</code>.</p>
<h3 id="show-toast-message">Show toast message</h3>
<p>Toast messages will appear in the bottom right of the plugin and will linger for a limited time before disappearing.
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">PluginCommands</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;molstar/lib/mol-plugin/commands&#39;</span><span class="p">;</span>

<span class="nx">PluginCommands</span><span class="p">.</span><span class="nx">Toast</span><span class="p">.</span><span class="nx">Show</span><span class="p">(</span><span class="nx">plugin</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Custom Message&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;A custom toast message that will disappear after 2 seconds.&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;toast-custom&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">timeoutMs</span><span class="o">:</span><span class="w"> </span><span class="kt">2000</span>
<span class="p">});</span>
</code></pre></div></p>
<h2 id="behaviors">Behaviors</h2>
<p>The state of the Mol* plugin is usually governed by dynamic behaviors which can be set up in initial plugin specification or updated during the plugin runtime. This allows for high modularity and customizability of individual plugin instances.</p>
<h3 id="highlight-loci">Highlight <code>Loci</code></h3>
<p>Highlighting adds a transient overpaint to a representation that will linger until the mouse enters hovers over another 
object. Highlights can be applied to a previously defined <code>Loci</code> by:
<div class="highlight"><pre><span></span><code><span class="nx">plugin</span><span class="p">.</span><span class="nx">managers</span><span class="p">.</span><span class="nx">interactivity</span><span class="p">.</span><span class="nx">lociHighlights</span><span class="p">.</span><span class="nx">highlightOnly</span><span class="p">({</span><span class="w"> </span><span class="nx">loci</span><span class="w"> </span><span class="p">});</span><span class="w"> </span><span class="c1">// loci: Loci</span>
</code></pre></div>
Reset all highlights by:
<div class="highlight"><pre><span></span><code><span class="nx">plugin</span><span class="p">.</span><span class="nx">managers</span><span class="p">.</span><span class="nx">interactivity</span><span class="p">.</span><span class="nx">clearHighlights</span><span class="p">();</span>
</code></pre></div></p>
<h3 id="select-loci">Select <code>Loci</code></h3>
<p>Selected elements will appear with distinct visuals and, if applicable, the corresponding sequence positions will be 
shown in the Sequence Viewer panel. Selections persist until removed, for example by clicking the background. A <code>Loci</code>
is selected by:
<div class="highlight"><pre><span></span><code><span class="nx">plugin</span><span class="p">.</span><span class="nx">managers</span><span class="p">.</span><span class="nx">interactivity</span><span class="p">.</span><span class="nx">lociSelects</span><span class="p">.</span><span class="nx">select</span><span class="p">({</span><span class="w"> </span><span class="nx">loci</span><span class="w"> </span><span class="p">});</span><span class="w"> </span><span class="c1">// loci: Loci</span>
</code></pre></div></p>
<p>Deselect a specific <code>Loci</code> by:
<div class="highlight"><pre><span></span><code><span class="nx">plugin</span><span class="p">.</span><span class="nx">managers</span><span class="p">.</span><span class="nx">interactivity</span><span class="p">.</span><span class="nx">lociSelects</span><span class="p">.</span><span class="nx">deselect</span><span class="p">({</span><span class="w"> </span><span class="nx">loci</span><span class="w"> </span><span class="p">});</span><span class="w"> </span><span class="c1">// loci: Loci</span>
</code></pre></div>
To deselect everything:
<div class="highlight"><pre><span></span><code><span class="nx">plugin</span><span class="p">.</span><span class="nx">managers</span><span class="p">.</span><span class="nx">interactivity</span><span class="p">.</span><span class="nx">lociSelects</span><span class="p">.</span><span class="nx">deselectAll</span><span class="p">();</span>
</code></pre></div></p>
<h3 id="focus-loci">Focus <code>Loci</code></h3>
<p>The focus representation shows a <code>Loci</code> in ball-and-stick representation and, additionally, visualizes non-covalent
interactions between atoms of the <code>Loci</code> as well as interactions with surrounding residues (default: 5 Ã…).
<div class="highlight"><pre><span></span><code><span class="nx">plugin</span><span class="p">.</span><span class="nx">managers</span><span class="p">.</span><span class="nx">structure</span><span class="p">.</span><span class="nx">focus</span><span class="p">.</span><span class="nx">setFromLoci</span><span class="p">(</span><span class="nx">loci</span><span class="p">);</span>
</code></pre></div>
Extend an existing focus representation by:
<div class="highlight"><pre><span></span><code><span class="nx">plugin</span><span class="p">.</span><span class="nx">managers</span><span class="p">.</span><span class="nx">structure</span><span class="p">.</span><span class="nx">focus</span><span class="p">.</span><span class="nx">addFromLoci</span><span class="p">(</span><span class="nx">loci</span><span class="p">);</span><span class="w"> </span><span class="c1">// loci: Loci</span>
</code></pre></div>
Reset by:
<div class="highlight"><pre><span></span><code><span class="nx">plugin</span><span class="p">.</span><span class="nx">managers</span><span class="p">.</span><span class="nx">structure</span><span class="p">.</span><span class="nx">focus</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
</code></pre></div></p>
<h3 id="zoom-loci">Zoom <code>Loci</code></h3>
<p>A <code>Loci</code> can also be used to manipulate the camera. Zoom in by:
<div class="highlight"><pre><span></span><code><span class="nx">plugin</span><span class="p">.</span><span class="nx">managers</span><span class="p">.</span><span class="nx">camera</span><span class="p">.</span><span class="nx">focusLoci</span><span class="p">(</span><span class="nx">loci</span><span class="p">);</span><span class="w"> </span><span class="c1">// loci: Loci</span>
</code></pre></div></p>
<p>Restore the default camera position by:
<div class="highlight"><pre><span></span><code><span class="nx">plugin</span><span class="p">.</span><span class="nx">managers</span><span class="p">.</span><span class="nx">camera</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
</code></pre></div></p>
<h3 id="turn-off-view-resetting-on-new-representations">Turn off view resetting on new representations</h3>
<p>A new representation via something like
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">StateTransforms</span><span class="p">.</span><span class="nx">Representation</span><span class="p">.</span><span class="nx">VolumeRepresentation3D</span><span class="p">,</span><span class="w"> </span><span class="p">...)</span>
</code></pre></div>
can reset the view to make the whole representation visible.
When one wants to keep the view the same instead of having the rep reset the view,
keep the view constant by:
<div class="highlight"><pre><span></span><code><span class="nx">plugin</span><span class="p">.</span><span class="nx">canvas3d</span><span class="o">?</span><span class="p">.</span><span class="nx">setProps</span><span class="p">({</span><span class="w"> </span><span class="nx">camera</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">manualReset</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">});</span>
</code></pre></div></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../data-state/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Data State Management
              </div>
            </div>
          </a>
        
        
          <a href="../selections/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Selections
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.53cc9318.min.js"></script>
      <script src="../assets/javascripts/bundle.e9c9f54f.min.js"></script><script id="__lang" type="application/json">{"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>