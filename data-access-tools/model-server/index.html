
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../plugin/transforms/custom-trajectory/">
      
      
        <link rel="next" href="../volume-server/">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.21">
    
    
      
        <title>Model Server - Mol* Developer Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.66ac8b77.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#model-server" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Mol* Developer Documentation" class="md-header__button md-logo" aria-label="Mol* Developer Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89">
  <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z" />
  <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5" />
  <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z" />
  <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25" />
</svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Mol* Developer Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Model Server
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/molstar/docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Mol* Developer Documentation" class="md-nav__button md-logo" aria-label="Mol* Developer Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89">
  <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z" />
  <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5" />
  <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z" />
  <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25" />
</svg>

    </a>
    Mol* Developer Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/molstar/docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Plugin
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Plugin
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugin/instance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating Instance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugin/examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugin/selections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Selections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugin/viewer-state/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Viewer State
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugin/data-state/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data State
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugin/file-formats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File Formats
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugin/cif-schemas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CIF Schemas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    State Transforms
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            State Transforms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugin/transforms/custom-trajectory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom Trajectory
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data Access Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Data Access Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Model Server
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Model Server
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#production-use" class="md-nav__link">
    <span class="md-ellipsis">
      Production Use
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preprocessor-example" class="md-nav__link">
    <span class="md-ellipsis">
      Preprocessor Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preprocessor-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Preprocessor Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Local Mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Properties
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#from-npm" class="md-nav__link">
    <span class="md-ellipsis">
      From NPM
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Volume Server
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Volume Server
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../volume-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../volume-server/examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../volume-server/how-it-works/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How it Works
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../volume-server/response-data-format/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Format
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugin-state-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugin State Server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../convert-to-bcif/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Convert CIF to BinaryCIF
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../create-ccd-table/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create Table from CCD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extract-ccd-ions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extract Ions from CCD
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Extensions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Extensions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extensions/mvs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MolViewSpec
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extensions/struct-conn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    wwPDB StructConn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extensions/tunnels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tunnels
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Misc
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Misc
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/interesting-pdb-entries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interesting PDB entries
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#production-use" class="md-nav__link">
    <span class="md-ellipsis">
      Production Use
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preprocessor-example" class="md-nav__link">
    <span class="md-ellipsis">
      Preprocessor Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preprocessor-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Preprocessor Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Local Mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Properties
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#from-npm" class="md-nav__link">
    <span class="md-ellipsis">
      From NPM
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="model-server">Model Server</h1>
<p>Provides access to molecular 1D, 2D, and 3D (sub-)structure models of molecules. Substructures are described by the 
mol-script (MolQL) language. It has the ability to include additional data to mmCIF “on the fly”, e.g. integrate 
primary PDB archival data from <a href="https://www.wwpdb.org/data/ccd">Chemical Component Dictionary (CCD)</a>, 
<a href="https://www.wwpdb.org/data/ccd">Protonation Variants Companion Dictionary (PVCD)</a> and 
<a href="https://www.wwpdb.org/data/bird">Biologically Interesting moleculeReference Dictionary (BIRD)</a>. </p>
<h2 id="example">Example</h2>
<div class="highlight"><pre><span></span><code>node<span class="w"> </span>lib/commonjs/servers/model/server<span class="w"> </span>--sourceMap<span class="w"> </span>pdb-bcif<span class="w"> </span><span class="s1">&#39;/opt/data/bcif/${id}.bcif&#39;</span>
</code></pre></div>
<h2 id="usage">Usage</h2>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--version</code>, <code>-v</code></td>
<td>Show program's version number and exit.</td>
</tr>
<tr>
<td><code>--cfg</code></td>
<td>JSON config file path. If a property is not specified, cmd line param/OS variable/default value are used.</td>
</tr>
<tr>
<td><code>--printCfg</code></td>
<td>Print current config for validation and exit.</td>
</tr>
<tr>
<td><code>--cfgTemplate</code></td>
<td>Prints default JSON config template to be modified and exit.</td>
</tr>
<tr>
<td><code>--apiPrefix</code></td>
<td>Specify the prefix of the API, i.e. &lt;host&gt;/&lt;apiPrefix&gt;/&lt;API queries&gt;</td>
</tr>
<tr>
<td><code>--defaultPort</code></td>
<td>Specify the port the server is running on</td>
</tr>
<tr>
<td><code>--cacheMaxSizeInBytes</code></td>
<td>Read structures are cached, this specifies the cache size, 0 for off.</td>
</tr>
<tr>
<td><code>--cacheEntryTimeoutMs</code></td>
<td>Specify in ms how long to keep entries in cache.</td>
</tr>
<tr>
<td><code>--requestTimeoutMs</code></td>
<td>The maximum number of ms the server spends on a request.</td>
</tr>
<tr>
<td><code>--queryTimeoutMs</code></td>
<td>The maximum time the server dedicates to executing a query in ms. Does not include the time it takes to read and export the data.</td>
</tr>
<tr>
<td><code>--shutdownTimeoutMinutes</code></td>
<td>Server will shut down after this amount of minutes, 0 for off.</td>
</tr>
<tr>
<td><code>--shutdownTimeoutVarianceMinutes</code></td>
<td>Modifies the shutdown timer by +/- <code>timeoutVarianceMinutes</code> (to avoid multiple instances shutting at the same time)</td>
</tr>
<tr>
<td><code>--maxQueryManyQueries</code></td>
<td>Maximum number of queries allowed by the query-many at a time</td>
</tr>
<tr>
<td><code>--defaultSource</code></td>
<td>modifies which 'sourceMap' source to use by default</td>
</tr>
<tr>
<td><code>--sourceMap</code></td>
<td>Map <code>id</code>s for a <code>source</code> to a file path. Example: <code>pdb-bcif '../../data/bcif/${id}.bcif'</code> - JS expressions can be used inside <code>${}</code>, e.g. <code>${id.substr(1, 2)}/${id}.mdb</code> Can be specified multiple times. The <code>SOURCE</code> variable (e.g. <code>pdb-bcif</code>) is arbitrary and depends on how you plan to use the server. Supported formats: cif, bcif, cif.gz, bcif.gz</td>
</tr>
<tr>
<td><code>--sourceMapUrl</code></td>
<td>Same as <code>--sourceMap</code> but for URL. <code>--sourceMapUrl src url format</code> Example: <code>pdb-cif "https://www.ebi.ac.uk/pdbe/entry-files/download/${id}_updated.cif" cif</code> Supported formats: cif, bcif, cif.gz, bcif.gz</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code>node<span class="w"> </span>lib/commonjs/servers/model/server<span class="w"> </span><span class="o">[</span>-h<span class="o">]</span><span class="w"> </span><span class="o">[</span>-v<span class="o">]</span>
<span class="w">        </span><span class="o">[</span>--cfg<span class="w"> </span>CFG<span class="o">]</span>
<span class="w">        </span><span class="o">[</span>--printCfg<span class="o">]</span>
<span class="w">        </span><span class="o">[</span>--cfgTemplate<span class="o">]</span>
<span class="w">        </span><span class="o">[</span>--apiPrefix<span class="w"> </span>PREFIX<span class="o">]</span>
<span class="w">        </span><span class="o">[</span>--defaultPort<span class="w"> </span>PORT<span class="o">]</span>
<span class="w">        </span><span class="o">[</span>--cacheMaxSizeInBytes<span class="w"> </span>CACHE_SIZE<span class="o">]</span>
<span class="w">        </span><span class="o">[</span>--cacheEntryTimeoutMs<span class="w"> </span>CACHE_TIMEOUT<span class="o">]</span>
<span class="w">        </span><span class="o">[</span>--requestTimeoutMs<span class="w"> </span>REQUEST_TIMEOUT<span class="o">]</span>
<span class="w">        </span><span class="o">[</span>--queryTimeoutMs<span class="w"> </span>QUERY_TIMEOUT<span class="o">]</span>
<span class="w">        </span><span class="o">[</span>--shutdownTimeoutMinutes<span class="w"> </span>TIME<span class="o">]</span>
<span class="w">        </span><span class="o">[</span>--shutdownTimeoutVarianceMinutes<span class="w"> </span>VARIANCE<span class="o">]</span>
<span class="w">        </span><span class="o">[</span>--maxQueryManyQueries<span class="w"> </span>QUERY_MANY_LIMIT<span class="o">]</span>
<span class="w">        </span><span class="o">[</span>--defaultSource<span class="w"> </span>DEFAULT_SOURCE<span class="o">]</span>
<span class="w">        </span><span class="o">[</span>--sourceMap<span class="w"> </span>SOURCE<span class="w"> </span>PATH<span class="o">]</span>
<span class="w">        </span><span class="o">[</span>--sourceMapUrl<span class="w"> </span>SOURCE<span class="w"> </span>PATH<span class="w"> </span>SOURCE_MAP_FORMAT<span class="o">]</span>
</code></pre></div>
<h3 id="production-use">Production Use</h3>
<p>In production, it is required to use a service that will keep the server running, such as <a href="https://github.com/foreverjs/forever">forever.js</a>.</p>
<h3 id="memory-issues">Memory Issues</h3>
<p>Sometimes nodejs might run into problems with memory. This is usually resolved by adding the <code>--max-old-space-size=8192</code> parameter.</p>
<h3 id="preprocessor-example">Preprocessor Example</h3>
<p>The preprocessor application allows addiing custom data to CIF files and/or 
<a href="../convert-to-bcif/">convert CIF to BinaryCIF</a>.
<div class="highlight"><pre><span></span><code>node<span class="w"> </span>lib/commonjs/servers/model/preprocess
</code></pre></div></p>
<h3 id="preprocessor-usage">Preprocessor Usage</h3>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--input</code>, <code>-i</code></td>
<td>Input filename</td>
</tr>
<tr>
<td><code>--outCIF</code>, <code>-oc</code></td>
<td>Output CIF filename</td>
</tr>
<tr>
<td><code>--outBCIF</code>, <code>-ob</code></td>
<td>Output BinaryCIF filename</td>
</tr>
<tr>
<td><code>--cfg</code>, <code>-c</code></td>
<td>Config file path</td>
</tr>
<tr>
<td><code>--folderIn</code>, <code>-fin</code></td>
<td>Convert folder</td>
</tr>
<tr>
<td><code>--folderOutCIF</code>, <code>-foc</code></td>
<td>Convert folder text output</td>
</tr>
<tr>
<td><code>--folderOutBCIF</code>, <code>-fob</code></td>
<td>Convert folder binary output</td>
</tr>
<tr>
<td><code>--folderNumProcesses</code>, <code>-fp</code></td>
<td>Convert folder number processes</td>
</tr>
</tbody>
</table>
<p>Example cfg.json:
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="s2">&quot;numProcesses&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="s2">&quot;customProperties&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">        </span><span class="s2">&quot;sources&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;wwpdb&quot;</span><span class="w"> </span><span class="p">],</span><span class="w"> </span>
<span class="w">        </span><span class="s2">&quot;params&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">            </span><span class="s2">&quot;wwPDB&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">                </span><span class="s2">&quot;chemCompBondTablePath&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;./build/data/ccb.bcif&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<h3 id="local-mode">Local Mode</h3>
<p>The server can be run in local/file based mode using
<div class="highlight"><pre><span></span><code>node<span class="w"> </span>lib/commonjs/servers/model/query
</code></pre></div></p>
<h3 id="custom-properties">Custom Properties</h3>
<p>This feature is still in development.</p>
<p>It is possible to provide property descriptors that transform data to internal representation and define how it should 
be exported into one or mode CIF categories. Examples of this are located in the <code>mol-model-props</code> module and are 
linked to the server in the config and <code>servers/model/properties</code>.</p>
<h2 id="from-npm">From NPM</h2>
<div class="highlight"><pre><span></span><code>npm install --production molstar
cd ./model-server 
</code></pre></div>
<p>(or <code>node node_modules\.bin\model-server</code> in Windows).</p>
<p>The NPM package contains all the tools mentioned in the previous sections as "binaries":</p>
<ul>
<li><code>model-server</code></li>
<li><code>model-server-query</code></li>
<li><code>model-server-preprocess</code></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.a7c05c9e.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>